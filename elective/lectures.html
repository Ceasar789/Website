<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lectures - Teacher LMS</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
<style>
:root{
  --bg-light:#f4f6fc;
  --bg-dark:#121212;
  --card-bg:#fff;
  --card-hover:#e9f0ff;
  --text-dark:#000;
  --text-light:#fff;
}
body{background:var(--bg-light);font-family:'Segoe UI',sans-serif;transition:all .3s;color:var(--text-dark);}
body.dark{background:var(--bg-dark);color:var(--text-light);}
.navbar{box-shadow:0 4px 12px rgba(0,0,0,.08);}
.card-box{
  background:var(--card-bg);
  padding:15px 20px;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,.05);
  margin-bottom:15px;
  transition:all .3s;
}
.card-box:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,.1);background:var(--card-hover);}
.lecture-title{cursor:pointer; font-weight:bold; display:flex; justify-content:space-between; align-items:center;}
.lecture-details{display:none; margin-top:10px; transition:all .3s;}
textarea,input{border-radius:8px;}
button{transition:all .2s;}
button:hover{transform:translateY(-1px);}
.counter{font-weight:bold;margin-bottom:10px;}
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary px-4">
<a class="navbar-brand" href="index.html">Teacher LMS</a>
<button class="btn btn-outline-light btn-sm ms-auto me-2" onclick="toggleDarkMode()"><i class="bi bi-moon-fill"></i></button>
<button class="btn btn-outline-light btn-sm" onclick="logout()">Logout</button>
</nav>

<!-- Back to Home -->
<div class="container mt-3">
  <button class="btn btn-secondary mb-3" onclick="window.location.href='dashboard.html'"><i class="bi bi-house-door"></i> Back to Home</button>
</div>

<div class="container mt-2">
<h3>Lecture Builder <span class="counter" id="lecCount">(0)</span></h3>
<div class="card-box">
<input id="lecTitle" class="form-control mb-2" placeholder="Lecture Title">
<textarea id="lecObj" class="form-control mb-2" placeholder="Objectives"></textarea>
<textarea id="lecDisc" class="form-control mb-2" placeholder="Discussion"></textarea>
<textarea id="lecAct" class="form-control mb-2" placeholder="Activity"></textarea>
<button class="btn btn-success w-100" onclick="addLecture()"><i class="bi bi-save"></i> Save</button>
</div>
<div id="lecList"></div>
</div>

<script>
function logout(){ if(confirm("Are you sure you want to logout?")) window.location.href="login.html"; }
function toggleDarkMode(){ document.body.classList.toggle('dark'); }

/* Load lectures */
let lectures = JSON.parse(localStorage.getItem('lectures')||'[]');
let lecList = document.getElementById('lecList');
let lecCount = document.getElementById('lecCount');

function updateCounter(){ lecCount.innerText = `(${lectures.length})`; }

function addLecture(){
  if(!lecTitle.value) return alert('Enter lecture title.');
  lectures.push({t:lecTitle.value,o:lecObj.value,d:lecDisc.value,a:lecAct.value});
  localStorage.setItem('lectures',JSON.stringify(lectures));
  lecTitle.value=lecObj.value=lecDisc.value=lecAct.value='';
  renderLectures();
  addActivity(`Added Lecture: ${lectures[lectures.length-1].t}`);
}

function renderLectures(){
  lecList.innerHTML='';
  lectures.forEach((l,i)=>{
    const div = document.createElement('div');
    div.className='card-box';
    div.innerHTML=`
      <div class="lecture-title" onclick="toggleDetails(this)">
        ${l.t} <i class="bi bi-chevron-down"></i>
      </div>
      <div class="lecture-details">
        <p><b>Objectives:</b> ${l.o}</p>
        <p><b>Discussion:</b> ${l.d}</p>
        <p><b>Activity:</b> ${l.a}</p>
        <button class="btn btn-danger btn-sm mt-2" onclick="deleteLecture(${i})">Delete</button>
      </div>
    `;
    lecList.appendChild(div);
  });
  updateCounter();
}

function toggleDetails(el){
  const details = el.nextElementSibling;
  const icon = el.querySelector('i');
  if(details.style.display === 'block'){
    details.style.display = 'none';
    icon.classList.replace('bi-chevron-up','bi-chevron-down');
  } else {
    details.style.display = 'block';
    icon.classList.replace('bi-chevron-down','bi-chevron-up');
  }
}

function deleteLecture(i){
  addActivity(`Deleted Lecture: ${lectures[i].t}`);
  lectures.splice(i,1);
  localStorage.setItem('lectures',JSON.stringify(lectures));
  renderLectures();
}

/* Activity log */
function addActivity(text){
  let recentActivities = JSON.parse(localStorage.getItem('recentActivities')||'[]');
  recentActivities.push(text);
  localStorage.setItem('recentActivities',JSON.stringify(recentActivities));
}

renderLectures();
</script>

</body>
</html>
